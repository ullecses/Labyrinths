# Лабиринт с поиском пути

## Описание

Это консольная игра, которая позволяет пользователю генерировать лабиринты, выбирать типы поверхностей и находить минимальный по стоимости путь от стартовой до конечной точки. Лабиринт можно настраивать по нескольким параметрам, включая размер, координаты стартовой и конечной точки, типы поверхностей, а также алгоритм поиска пути.

## Как играть

1. **Выбор размера лабиринта**  
   В начале игры вам нужно выбрать размер лабиринта.

2. **Ввод координат стартовой и конечной точки**  
После выбора размера лабиринта, нужно указать координаты стартовой и конечной точки. Координаты должны быть в пределах размеров лабиринта (например, от 1,1 до 17,31 для лабиринта 17x31).

3. **Выбор метода генерации лабиринта**  
Далее, вам предложат выбрать один из способов генерации лабиринта:
- Алгоритм Выращивания дерева
- Алгоритм Краскала

4. **Добавление типов поверхностей**  
Программа спросит, хотите ли вы добавить различные типы поверхностей, которые могут повлиять на стоимость передвижения по лабиринту. Виды поверхностей:
- **Обычная поверхность**: стоимость передвижения — 1
- **Песок**: стоимость передвижения — 2
- **Монета**: бесплатный проход, стоимость — 0

5. **Отображение сгенерированного лабиринта**  
После всех настроек, на экране появится сгенерированный лабиринт с выбранными параметрами.

6. **Выбор алгоритма поиска пути**  
Вам предложат выбрать один из методов для поиска минимального пути:
- A*
- Поиск в ширину (BFS)

7. **Отображение найденного пути**  
После поиска программа отобразит лабиринт с отмеченным минимальным по стоимости путем от стартовой до конечной точки. Стоимость пути зависит от типов поверхностей:
- Обычная поверхность — 1
- Песок — 2
- Монета — 0

# Структура проекта

## Пакет: `backend.academy`

### 1. Класс: `Cell`
- **Описание**: Моделирует клетку в лабиринте, имеет тип и позицию.
- **Методы**:
  - `Type getType()`: Возвращает тип клетки.
  - `void setType(Type type)`: Устанавливает тип клетки.
  - `boolean isPassage()`: Проверяет, является ли клетка проходом.

### 2. Класс: `Coordinate`
- **Описание**: Представляет координаты клетки в лабиринте с индексами строки и столбца.

### 3. Класс: `IOHandler`
- **Описание**: Обрабатывает ввод и вывод данных для приложения.
- **Методы**:
  - `String readLine()`: Читает строку ввода от пользователя.
  - `void write(String message)`: Печатает сообщение без переноса строки.
  - `void writeLine(String message)`: Печатает сообщение с переносом строки.

### 4. Класс: `Main`
- **Описание**: Главный класс приложения, инициализирует и запускает процесс генерации лабиринта.
- **Методы**:
  - `public static void main(String[] args)`: Точка входа в приложение.

### 5. Класс: `Maze`
- **Описание**: Представляет лабиринт, состоящий из клеток и их типов.
- **Методы**:
  - `boolean isPassage(int row, int col)`: Проверяет, является ли указанная клетка проходом.
  - `Cell.Type getType(Coordinate coord)`: Получает тип клетки по координатам.
  - `void setCellType(Coordinate coord, Cell.Type type)`: Устанавливает тип клетки по координатам.
  - `void addSurfaces()`: Добавляет поверхности к проходам в лабиринте.
  - `List<Coordinate> getUnvisitedNeighbors(Coordinate coord)`: Получает непосещенные соседние клетки.
    
### 6. Интерфейс: `UserInterface`
- **Описание**: Определяет методы для взаимодействия с пользователем при выборе параметров лабиринта и отображении его состояния.
- **Методы**:
  - `Maze chooseMazeSize()`: Позволяет пользователю выбрать размер лабиринта.
  - `Generator chooseMazeGenerator()`: Позволяет пользователю выбрать алгоритм генерации лабиринта.
  - `Solver chooseSolver()`: Позволяет пользователю выбрать алгоритм поиска пути.
  - `Coordinate getCoordinate(String prompt, Maze maze)`: Запрашивает у пользователя координаты в формате строки.
  - `boolean askUserToAddSurfaces()`: Спрашивает у пользователя, нужно ли добавить поверхности в лабиринт.
  - `void displayMaze(Maze maze)`: Отображает лабиринт в консоли.
  - `String getDisplaySymbol(Cell cell)`: Возвращает символ для отображения состояния клетки в лабиринте.

### 7. Класс: `MazeApplication`
- **Описание**: Основной класс для работы с лабиринтом. Управляет логикой выбора параметров, генерации лабиринта и поиска пути.
- **Методы**:
  - `public MazeApplication(IOHandler ioHandler, ConsoleUserInterface consoleUserInterface)`: Конструктор, инициализирует интерфейсы ввода-вывода и взаимодействия с пользователем.
  - `public void run()`: Выполняет основной процесс: выбор размера лабиринта, генератора, ввода координат, отображения лабиринта и поиска пути.

### 8. Класс: `ConsoleUserInterface`
- **Описание**: Реализация интерфейса `UserInterface`, предназначенная для работы через консоль. Обеспечивает выбор параметров лабиринта и отображение результатов.
- **Поля**:
  - `IOHandler ioHandler`: Обеспечивает взаимодействие с пользователем через консоль.
- **Методы**:
  - `public Maze chooseMazeSize()`: Позволяет пользователю выбрать размер лабиринта из доступных опций (маленький, средний, большой).
  - `public Generator chooseMazeGenerator()`: Позволяет выбрать один из алгоритмов генерации лабиринта (Kruskal или Growing Tree).
  - `public Solver chooseSolver()`: Позволяет выбрать один из алгоритмов поиска пути (ShortestPathFinder или AStarSolver).
  - `public Coordinate getCoordinate(String prompt, Maze maze)`: Запрашивает у пользователя координаты начала и конца в формате строки.
  - `public boolean askUserToAddSurfaces()`: Спрашивает у пользователя, нужно ли добавить поверхности (например, песок или монеты) в лабиринт.
  - `public void displayMaze(Maze maze)`: Отображает лабиринт в консоли построчно.
  - `public String getDisplaySymbol(Cell cell)`: Возвращает символ для клетки в зависимости от её типа (стена, проход, монета, песок, путь).

### Пакет: `backend.academy.generators`

#### 1. Интерфейс: `Generator`
- **Описание**: Определяет методы для генерации лабиринтов.
- **Методы**:
  - `Maze generate(Maze maze, Coordinate start, Coordinate end)`: Генерирует лабиринт, используя указанные начальные и конечные координаты.

#### 2. Класс: `GrowingTreeMazeGenerator`
- **Описание**: Генерирует лабиринт с использованием алгоритма растущего дерева.
- **Методы**:
  - `Maze generate(Maze maze, Coordinate start, Coordinate end)`: Генерирует лабиринт, начиная с заданной стартовой клетки и создавая проходы.
  - `Coordinate selectCell(List<Coordinate> cells)`: Выбирает случайную клетку из списка доступных клеток для добавления в лабиринт.
  - `Coordinate getCellBetween(Coordinate current, Coordinate next)`: Возвращает координаты клетки, находящейся между текущей и следующей клетками.
- **Алгоритм**: Начинает с добавления стартовой клетки и создает проходы до тех пор, пока есть доступные клетки.

#### 3. Класс: `KruskalMazeGenerator`
- **Описание**: Генерирует лабиринт с использованием алгоритма Краскала.
- **Методы**:
  - `Maze generate(Maze maze, Coordinate start, Coordinate end)`: Генерирует лабиринт, соединяя клетки случайными рёбрами.
  - `int coordinateToIndex(Coordinate coord, int width)`: Преобразует координаты клетки в индекс для доступа в массиве.
- **Алгоритм**: Создает случайные рёбра и соединяет клетки, избегая циклов, используя структуру данных "составные множества".

### Пакет: `backend.academy.solvers`

#### 1. Интерфейс: `Solver`
- **Описание**: Определяет методы для решения лабиринтов.
- **Методы**:
  - `List<Coordinate> solve(Maze maze, Coordinate start, Coordinate end)`: Находит кратчайший путь в лабиринте от стартовой до конечной клетки.

#### 2. Класс: `AStarSolver`
- **Описание**: Реализует алгоритм A* для нахождения кратчайшего пути в лабиринте.
- **Методы**:
  - `List<Coordinate> solve(Maze maze, Coordinate start, Coordinate end)`: Выполняет алгоритм A* для нахождения пути.
  - `private int heuristic(Coordinate a, Coordinate b)`: Вычисляет эвристическую оценку расстояния между двумя клетками.
  - `private int getCellCost(Maze maze, Coordinate coord)`: Возвращает стоимость посещения указанной клетки.
- **Алгоритм**: Использует приоритетную очередь и эвристическую функцию для оценки расстояния до цели.

#### 3. Класс: `ShortestPathFinder`
- **Описание**: Реализует алгоритм поиска в ширину (BFS) для нахождения кратчайшего пути в лабиринте.
- **Методы**:
  - `List<Coordinate> solve(Maze maze, Coordinate start, Coordinate end)`: Находит кратчайший путь, используя алгоритм BFS.
  - `private int getCellCost(Maze maze, Coordinate coord)`: Возвращает стоимость посещения указанной клетки.
- **Алгоритм**: Обрабатывает клетки по уровням, пока не достигнет цели.

#### 4. Класс: `SolverUtils`
- **Описание**: Утилитарный класс для работы с соседними клетками.
- **Методы**:
  - `public static List<Coordinate> getNeighbors(Maze maze, Coordinate coord)`: Возвращает список соседних клеток для заданной клетки.
